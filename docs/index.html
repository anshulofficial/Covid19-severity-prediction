<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.7.2" />

<meta name="description" content="&lt;h1 align=&#34;center&#34;&gt;Covid Severity Forecasting&lt;/h1&gt; …" />
<link href='https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css' rel='stylesheet'>
<link href='https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/8.0.0/sanitize.min.css' rel='stylesheet'>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" rel="stylesheet">
<style>.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{font-weight:bold}#index h4 + ul{margin-bottom:.6em}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
</head>
<body>
<main>
<article id="content">
<header>

</header>
<section id="section-intro">
<h1 align="center">Covid Severity Forecasting</h1>
<p align="center">Data and models (updated daily) for forecasting COVID-19 severity for individual counties and hospitals in the US. The data includes confirmed cases/deaths, demographics, risk factors, social distancing data, and much more.
</p>
<p align="center">
Table of contents </br>
<a href="#overview">Overview</a> •
<a href="#quickstart-with-the-data--models">Quickstart</a> •
<a href="#acknowledgements">Acknowledgements</a>
</br> Resources </br>
<a href="./data/county_data_abridged.csv">Data csv</a> •
<a href="https://arxiv.org/abs/2005.07882">Paper</a> •
<a href="http://covidseverity.com/">Website</a>
</p>
<h1 id="overview">Overview</h1>
<p><em>Note: This repo is actively maintained - for any questions, please file an issue.</em></p>
<ul>
<li><strong><a href="./data/readme.md">Data</a></strong> (updated daily): We have cleaned, merged, and documented a large corpus of hospital- and county-level data from a variety of public sources to aid data science efforts to combat COVID-19.<ul>
<li>At the hospital level, the data include the location of the hospital, the number of ICU beds, the total number of employees, the hospital type, and contact information</li>
<li>At the county level, our data include socioeconomic factors, social distancing scores, and COVID-19 cases/deaths from USA Facts and NYT</li>
<li>Easily downloadable as <a href="./data/county_data_abridged.csv">processed csv</a> or full pipeline</li>
<li>Extensive documentation available <a href="./data/list_of_columns.md">here</a>
<img alt="" src="results/data_sources.png"></li>
</ul>
</li>
<li><strong><a href="https://arxiv.org/abs/2005.07882">Paper link</a></strong>: "Curating a COVID-19 data repository and forecasting county-level death counts in the United States"</li>
<li><strong><a href="http://covidseverity.com/">Project website</a></strong>: <a href="http://covidseverity.com/">http://covidseverity.com/</a><ul>
<li>see <a href="http://covidseverity.com/results/deaths.html">interactive county-level map</a> + <a href="http://covidseverity.com/results/severity_map.html">interactive hospital-level map</a>
<img alt="" src="results/maps_static.png"></li>
</ul>
</li>
<li><strong><a href="./modeling/readme.md">Modeling</a></strong>: Using this data, we have developed a short-term (3-5 days) forecasting model for mortality at the county level. This model combines a county-specific exponential growth model and a shared exponential growth model through a weighted average, where the weights depend on past prediction accuracy.
<img alt="" src="https://covidseverity.com/results/forecasts_small.svg"></li>
<li><strong>Severity index</strong>: The Covid pandemic severity index (CPSI) is designed to help aid the distribution of medical resources to hospitals. It takes on three values (3: High, 2: Medium, 1: Low), indicating the severity of the covid-19 outbreak for a hospital on a certain day. It is calculated in three steps.<ol>
<li>county-level predictions for number of deaths are modeled</li>
<li>county-level predictions are allocated to hospitals within counties proportional the their total number of employees</li>
<li>final value is decided by thresholding the number of cumulative predicted deaths for a hospital (=current recorded deaths + predicted future deaths)</li>
</ol>
</li>
</ul>
<h1 id="quickstart-with-the-data-models">Quickstart with the data + models</h1>
<p>Can download, load, and merge the data via:</p>
<pre><code class="python">import load_data
# first time it runs, downloads and caches the data
df = load_data.load_county_level(data_dir='/path/to/data') 
</code></pre>
<ul>
<li>for more data details, see <a href="./data/readme.md">./data/readme.md</a></li>
<li>see also the <a href="quickstart.ipynb">quickstart notebook</a></li>
<li>we are constantly monitoring and adding new data sources (+ relevant data news <a href="https://docs.google.com/document/d/1Gxfp-8NXHZN1Hre0CThx0sdO17vDOso640eK6MHlbiU/">here</a>)</li>
<li>output from running the daily updates is stored <a href="./functions/update_test.log">here</a></li>
</ul>
<p>To get deaths predictions for our current best-performing model, the simplest way is to call the <code>add_preds</code> function (for more details, see <a href="./modeling/readme.md">./modeling/readme.md</a>)</p>
<pre><code class="python">from modeling.fit_and_predict import add_preds
df = add_preds(df, NUM_DAYS_LIST=[1, 3, 5]) # adds keys like &quot;Predicted Deaths 1-day&quot;, &quot;Predicted Deaths 3-day&quot;
# NUM_DAYS_LIST is list of number of days in the future to predict
</code></pre>
<h2 id="related-county-level-projects">Related county-level projects</h2>
<ul>
<li><a href="https://github.com/JieYingWu/COVID-19_US_County-level_Summaries">County-level data summaries from JHU</a></li>
<li><a href="https://geodacenter.github.io/covid/about">UChicago GeoData visualization team</a></li>
</ul>
<h1 id="acknowledgements">Acknowledgements</h1>
<p>The UC Berkeley Departments of Statistics, EECS led by Professor Bin Yu (group members are all alphabetical by last name)</p>
<ul>
<li><strong><a href="https://www.stat.berkeley.edu/~yugroup/people.html">Yu group team</a></strong> (Data/modeling): Nick Altieri, Rebecca Barter, James Duncan, Raaz Dwivedi, Karl Kumbier, Xiao Li, Robbie Netzorg, Briton Park, Chandan Singh (student lead), Yan Shuo Tan, Tiffany Tang, Yu Wang</li>
<li>Summer team: Abhineet Agarwal, Maya Shen, Danqing Wang, Chao Zhang</li>
<li><a href="https://response4life.org/">Response4Life</a> (Organization/distribution) team and volunteers, particularly Don Landwirth and Rick Brennan</li>
<li><a href="https://emergency.ucsf.edu/people/aaron-kornblith-md">Medical team</a> (Advice from a medical perspective): Roger Chaufournier, Aaron Kornblith, David Jaffe</li>
<li>Hospital-info collection: Matthew Shen, Anthony Rio, Miles Bishop, Josh Davis, and Dylan Goetting</li>
<li><a href="https://geodacenter.github.io/covid/about">Kolak group team</a> (Geospatial visualization): Qinyun Lin</li>
<li>Support from Google: Cat Allman and Peter Norvig</li>
<li><a href="https://shen.ieor.berkeley.edu/">Shen Group team</a> (IEOR): Junyu Cao, Shunan Jiang, Pelagie Elimbi Moudio</li>
<li>Helpful input from many including: SriSatish Ambati, Rob Crockett, Tina Elassia-Rad, Marty Elisco, Nick Jewell, Valerie Isham, Valerie Karplus, Andreas Lange, Ying Lu, Samuel Scarpino, Jas Sekhon, Phillip Stark, Jacob Steinhardt, Suzanne Tamang, Brian Yandell, Tarek Zohdi</li>
<li>Additionally, we would like to thank our sources, which can be found in the <a href="./data/readme.md">data readme</a></li>
</ul>
<p>To reference, please cite <a href="https://arxiv.org/abs/2005.07882">the paper</a>:</p>
<pre><code class="c">@article{altieri2020curating,
  title={Curating a COVID-19 data repository and forecasting county-level death counts in the United States},
  author={Altieri, Nick and Barter, Rebecca and Duncan, James and Dwivedi, Raaz and Kumbier, Karl and Li, Xiao and Netzorg, Robert and Park, Briton and Singh, Chandan and Tan, Yan Shuo and others},
  journal={arXiv preprint arXiv:2005.07882},
  year={2020}
}
</code></pre>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;
.. include:: ../readme.md
&#34;&#34;&#34;</code></pre>
</details>
</section>
<section>
<h2 class="section-title" id="header-submodules">Sub-modules</h2>
<dl>
<dt><code class="name"><a title="modeling.all_deaths_preds" href="all_deaths_preds.html">modeling.all_deaths_preds</a></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt><code class="name"><a title="modeling.exponential_modeling" href="exponential_modeling.html">modeling.exponential_modeling</a></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt><code class="name"><a title="modeling.fit_and_predict" href="fit_and_predict.html">modeling.fit_and_predict</a></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt><code class="name"><a title="modeling.models" href="models/index.html">modeling.models</a></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt><code class="name"><a title="modeling.moving_average" href="moving_average.html">modeling.moving_average</a></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt><code class="name"><a title="modeling.naive_autoreg_baselines" href="naive_autoreg_baselines.html">modeling.naive_autoreg_baselines</a></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt><code class="name"><a title="modeling.pmdl_weight" href="pmdl_weight.html">modeling.pmdl_weight</a></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt><code class="name"><a title="modeling.predict_all_deaths" href="predict_all_deaths.html">modeling.predict_all_deaths</a></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt><code class="name"><a title="modeling.reproduce_paper_results" href="reproduce_paper_results.html">modeling.reproduce_paper_results</a></code></dt>
<dd>
<section class="desc"></section>
</dd>
<dt><code class="name"><a title="modeling.shared_models" href="shared_models.html">modeling.shared_models</a></code></dt>
<dd>
<section class="desc"></section>
</dd>
</dl>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#quickstart-with-the-data-models">Quickstart with the data + models</a><ul>
<li><a href="#related-county-level-projects">Related county-level projects</a></li>
</ul>
</li>
<li><a href="#acknowledgements">Acknowledgements</a></li>
</ul>
</div>
<ul id="index">
<li><h3><a href="#header-submodules">Sub-modules</a></h3>
<ul>
<li><code><a title="modeling.all_deaths_preds" href="all_deaths_preds.html">modeling.all_deaths_preds</a></code></li>
<li><code><a title="modeling.exponential_modeling" href="exponential_modeling.html">modeling.exponential_modeling</a></code></li>
<li><code><a title="modeling.fit_and_predict" href="fit_and_predict.html">modeling.fit_and_predict</a></code></li>
<li><code><a title="modeling.models" href="models/index.html">modeling.models</a></code></li>
<li><code><a title="modeling.moving_average" href="moving_average.html">modeling.moving_average</a></code></li>
<li><code><a title="modeling.naive_autoreg_baselines" href="naive_autoreg_baselines.html">modeling.naive_autoreg_baselines</a></code></li>
<li><code><a title="modeling.pmdl_weight" href="pmdl_weight.html">modeling.pmdl_weight</a></code></li>
<li><code><a title="modeling.predict_all_deaths" href="predict_all_deaths.html">modeling.predict_all_deaths</a></code></li>
<li><code><a title="modeling.reproduce_paper_results" href="reproduce_paper_results.html">modeling.reproduce_paper_results</a></code></li>
<li><code><a title="modeling.shared_models" href="shared_models.html">modeling.shared_models</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.7.2</a>.</p>
</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
</body>
</html><a href="https://github.com/Yu-Group/covid19-severity-prediction" class="github-corner" aria-label="View source on GitHub"><svg width="120" height="120" viewBox="0 0 250 250" style="fill:#70B7FD; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>